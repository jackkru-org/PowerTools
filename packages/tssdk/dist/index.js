(()=>{"use strict";var e={778:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.chainConfig=t.config=void 0;var n=r(354);t.config={requestTotalAttempts:5,callbackCallDelay:900,chainRequestTimeout:5e3,maxNodeResponseTime:99999},t.chainConfig={102:(0,n.transformNodeList)({"2UYKF1HyNz7QSFTGY5ffZSG8oWem":{host:["http://c102n6.thepower.io:43382","https://c102n6.thepower.io:43482"],ip:["http://c102n6.thepower.io:43382","https://c102n6.thepower.io:43482"]},"2i6tWT8XuT3jQcvpzKUM9V51L2sm":{host:["http://c102n7.thepower.io:43382","https://c102n7.thepower.io:43482"],ip:["http://c102n7.thepower.io:43382","https://c102n7.thepower.io:43482"]},"3UvkSW1iMARXVpxAwLRXppVJ5xNJ":{host:["http://c102n2.thepower.io:43382","https://c102n2.thepower.io:43482"],ip:["http://c102n2.thepower.io:43382","https://c102n2.thepower.io:43482"]},"4ChWotb5pfLvmGXBc5M8fu7jNHXB":{host:["http://c102n4.thepower.io:43382","https://c102n4.thepower.io:43482"],ip:["http://c102n4.thepower.io:43382","https://c102n4.thepower.io:43482"]},"4NoNQJzEcWr2gyszSUdGShXXseaC":{host:["http://c102n5.thepower.io:43382","https://c102n5.thepower.io:43482"],ip:["http://c102n5.thepower.io:43382","https://c102n5.thepower.io:43482"]},NPvVcKpnHuGKsActjmEmWKgSbZh:{host:["http://c102n9.thepower.io:43382","https://c102n9.thepower.io:43482"],ip:["http://c102n9.thepower.io:43382","https://c102n9.thepower.io:43482"]},oM2yj49e3g3gWquE1x1JDfa8ZQD:{host:["http://c102n3.thepower.io:43382","https://c102n3.thepower.io:43482"],ip:["http://c102n3.thepower.io:43382","https://c102n3.thepower.io:43482"]},wFQYUgQLa2yJqdEgVD7sJLJxewC:{host:["http://c102n10.thepower.io:43382","https://c102n10.thepower.io:43482"],ip:["http://c102n10.thepower.io:43382","https://c102n10.thepower.io:43482"]}}),8:(0,n.transformNodeList)({"8rxo4eAncEqj8kraFFmS9MvJTGW":{host:["http://c8n1.thepower.io:43288","https://c8n1.thepower.io:43388"],ip:["http://51.15.80.38:43288","https://51.15.80.38:43388"]}}),2:(0,n.transformNodeList)({"2UYKF1HyNz7QSFTGY5ffZSG8oWem":{host:["http://c102n6.thepower.io:43382","https://c102n6.thepower.io:43482"],ip:["http://c102n6.thepower.io:43382","https://c102n6.thepower.io:43482"]},"2i6tWT8XuT3jQcvpzKUM9V51L2sm":{host:["http://c102n7.thepower.io:43382","https://c102n7.thepower.io:43482"],ip:["http://c102n7.thepower.io:43382","https://c102n7.thepower.io:43482"]},"3UvkSW1iMARXVpxAwLRXppVJ5xNJ":{host:["http://c102n2.thepower.io:43382","https://c102n2.thepower.io:43482"],ip:["http://c102n2.thepower.io:43382","https://c102n2.thepower.io:43482"]},"4ChWotb5pfLvmGXBc5M8fu7jNHXB":{host:["http://c102n4.thepower.io:43382","https://c102n4.thepower.io:43482"],ip:["http://c102n4.thepower.io:43382","https://c102n4.thepower.io:43482"]},"4NoNQJzEcWr2gyszSUdGShXXseaC":{host:["http://c102n5.thepower.io:43382","https://c102n5.thepower.io:43482"],ip:["http://c102n5.thepower.io:43382","https://c102n5.thepower.io:43482"]},oM2yj49e3g3gWquE1x1JDfa8ZQD:{host:["http://c102n3.thepower.io:43382","https://c102n3.thepower.io:43482"],ip:["http://c102n3.thepower.io:43382","https://c102n3.thepower.io:43482"]},wFQYUgQLa2yJqdEgVD7sJLJxewC:{host:["http://c102n10.thepower.io:43382","https://c102n10.thepower.io:43482"],ip:["http://c102n10.thepower.io:43382","https://c102n10.thepower.io:43482"]}})}},14:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ChainAction=void 0,(r=t.ChainAction||(t.ChainAction={})).GET_TRANSACTION_STATUS="GET_TRANSACTION_STATUS",r.GET_CHAIN_NODES="GET_CHAIN_NODES",r.GET_BLOCK="GET_BLOCK",r.GET_WALLET="GET_WALLET",r.GET_NODE_SETTINGS="GET_NODE_SETTINGS",r.CREATE_TRANSACTION="CREATE_TRANSACTION",r.GET_MY_CHAIN="GET_MY_CHAIN",r.GET_SC_CODE="GET_SC_CODE",r.GET_SC_STATE="GET_SC_STATE"},354:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.transformResponse=t.transformNodeList=t.queueNodes=void 0;var s=c(r(167)),u=r(14),f=r(778);t.queueNodes=function(e){return n(void 0,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=+new Date,[4,Promise.all(e.map((function(e){return s.default.request({url:"".concat(e.address,"/api/status"),timeout:1e3,params:{node:e.nodeId}}).then((function(e){var r,n;return{address:new URL(e.config.url).origin,time:+new Date-t,nodeId:null===(n=null===(r=e.config)||void 0===r?void 0:r.params)||void 0===n?void 0:n.node}}),(function(e){var t,r;return{address:new URL(e.config.url).origin,time:f.config.maxNodeResponseTime,nodeId:null===(r=null===(t=e.config)||void 0===t?void 0:t.params)||void 0===r?void 0:r.node}}))})))];case 1:return[2,r.sent().sort((function(e,t){return(e.time||0)-(t.time||0)}))]}}))}))},t.transformNodeList=function(e){var t=[];return Object.keys(e).forEach((function(r){e[r].ip.forEach((function(e){return t.push({address:e,nodeId:r})})),e[r].host.forEach((function(e){return t.push({address:e,nodeId:r})}))})),t.reduce((function(e,t){var r=t.address,n=t.nodeId;return e.some((function(e){return e.address===r&&e.nodeId===n}))?e:a(a([],i(e),!1),[{address:r,nodeId:n}],!1)}),[])},t.transformResponse=function(e,r){return n(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(r){case u.ChainAction.GET_TRANSACTION_STATUS:return[2,e.res];case u.ChainAction.GET_CHAIN_NODES:return[2,(0,t.transformNodeList)(e.chain_nodes)];case u.ChainAction.GET_BLOCK:return[2,e.block];case u.ChainAction.GET_WALLET:return[2,e.info];case u.ChainAction.GET_NODE_SETTINGS:return[2,e.settings]}return[2,e]}))}))}},607:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(86),t)},735:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddressApi=void 0;var n=r(563),o=[];function i(e){for(var t=function(){var e=o;if(!e.length){e=[];for(var t=0;t<256;t++){for(var r=t,n=0;n<8;n++)r=1&r?3988292384^r>>>1:r>>>1;e[t]=r}o=e}return e}(),r=-1,n=0;n<8;n++)r=r>>>8^t[255&(r^e[n])];return(-1^r)>>>0}function a(e){var t=new Uint8Array(8);if(t[0]=128,e.scope===n.AddressScopeEnum.private)t[0]|=32,t[0]|=31&Math.floor(e.block/4294967296),t[1]|=e.block>>>24,t[2]|=e.block>>>16,t[3]|=e.block>>>8,t[4]|=e.block,t[5]|=e.wallet>>>16,t[6]|=e.wallet>>>8,t[7]|=e.wallet;else{var r=e.group<<5>>>0;t[0]|=r>>>16&31,t[1]|=r>>>8,t[2]|=r,t[2]|=e.block>>>16&31,t[3]|=e.block>>>8,t[4]|=e.block,t[5]|=e.wallet>>>16,t[6]|=e.wallet>>>8,t[7]|=e.wallet}return t}function c(e,t,r){var n;if(26===e){var o="A".charCodeAt(0),i=t%26,a=Math.floor(t/26);n=String.fromCharCode(a+o)+String.fromCharCode(i+o)}else for(n=t.toString(e).toUpperCase();n.length<r;)n="0"+n;return n}t.AddressApi={encodeAddress:function(e){if(e[0]<128||e[0]>191)throw new Error("Bad address");var t,r=e[7]|e[6]<<8|e[5]<<16,n=i(e);if(32&e[0])t={scope:"private",checksum:n%256,block:o=((e[4]|e[3]<<8|e[2]<<16|e[1]<<24)>>>0)+4294967296*(31&e[0]),txt:c(16,o,10)+c(16,r,6)+c(16,n%256,2),wallet:r};else{var o=e[4]|e[3]<<8|(31&e[2])<<16,a=(e[2]|e[1]<<8|(31&e[0])<<16)>>>5,s=r+16777216*o;t={scope:"public",checksum:n%100,wallet:r,block:o,txt:c(26,Math.floor(a/100),2)+c(10,a%100,2)+c(10,s,14)+c(10,n%100,2),group:a}}return t},parseTextAddress:function(e){var t,r,o;if(20===e.length){var c=parseInt(e.slice(4,18)),s=parseInt(e.slice(2,4)),u="A".charCodeAt(0),f=e.charCodeAt(1)-u,l=100*(26*(e.charCodeAt(0)-u)+f)+s,h=Math.floor(c/16777216),d=c%16777216;r=parseInt(e.slice(18,20)),o=i(t=a({block:h,wallet:d,group:l,scope:n.AddressScopeEnum.public}))%100}else h=parseInt(e.slice(0,10),16),d=parseInt(e.slice(10,16),16),r=parseInt(e.slice(16,18),16),o=i(t=a({block:h,wallet:d,scope:n.AddressScopeEnum.private}))%256;if(r!==o)throw new Error("Invalid address checksum");return t},hexToAddress:function(e){var t=e.match(/(.{1,2})/g)||[];return Uint8Array.from(t,(function(e){return parseInt(e,16)}))},textAddressToHex:function(e){for(var t=this.parseTextAddress(e),r="",n=0;n<t.length;n++)r+=c(16,t[n],2);return r},isTextAddressValid:function(e){try{this.parseTextAddress(e)}catch(e){return!1}return!0},hexToTextAddress:function(e){var t=this.hexToAddress(e);return this.encodeAddress(t).txt}}},49:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoApi=void 0;var u=s(r(497)),f=r(731),l=i(r(163)),h=s(r(176)),d=r(543),p=s(r(113)),v=r(400),w=s(r(999)),b=r(735),y="aes-128-cbc",g=(0,f.BIP32Factory)(l),_=function(e){var t;return null===(t=e.match(/.{1,64}/g))||void 0===t?void 0:t.join("\n")},m=function(e){return v.Buffer.from((e.match(/(.{1,2})/g)||[]).map((function(e){return parseInt(e,16)})))},A=function(e,t,r){return void 0===r&&(r="md5"),(0,w.default)(r).update(v.Buffer.concat([v.Buffer.from(e,"utf8"),v.Buffer.from(t)])).digest()},T=function(e,t,r,n){var o=p.default.createCipheriv(n,t,r),i=o.update(e);return v.Buffer.concat([i,o.final()])},S=function(e,t,r,n){var o=p.default.createDecipheriv(n,t,r),i=o.update(e);return v.Buffer.concat([i,o.final()])},E=function(e,t,r){void 0===r&&(r=y);var n=v.Buffer.concat([v.Buffer.from([48,62,2,1,0,48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10,4,39,48,37,2,1,1,4]),v.Buffer.from([e.length]),e]),o=p.default.randomBytes(16),i=A(t,o.slice(0,8));return function(e,t,r){return void 0===r&&(r=y),"-----BEGIN EC PRIVATE KEY-----\nProc-Type: 4,ENCRYPTED\nDEK-Info: ".concat(r.toUpperCase(),",").concat(t.toString("hex").toUpperCase(),"\n").concat(_(e.toString("base64")),"\n-----END EC PRIVATE KEY-----")}(T(n,i,o,r),o,r)},x=function(e,t,r,n){void 0===n&&(n=y);var o=v.Buffer.from(e,"base64"),i=m(r),a=A(t,r.slice(0,8)),c=S(o,a,i,n);if("2B8104000A"!==c.slice(18,23).toString("hex").toUpperCase())throw new Error("Unknown curve");return c.slice(-32).toString("hex")};function C(e){var t={},r=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));r&&(t.cipher=r[0],t.ivsalt=r[1]);var n=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));n&&(t.type=n[1]);var o=-1,i=e.indexOf("-----END"),a=0;if(-1!==e.indexOf("\r\n\r\n")&&(o=e.indexOf("\r\n\r\n"),a=2),-1!==e.indexOf("\n\n")&&(o=e.indexOf("\n\n"),a=1),-1!==o&&-1!==i){var c=e.substring(o+2*a,i-a);c=c.replace(/\s+/g,""),t.data=c}return t}t.CryptoApi={generateSeedPhrase:function(){return h.default.generateMnemonic()},generateKeyPairFromSeedPhrase:function(e,t,r){return a(this,void 0,void 0,(function(){var n,o,i,a;return c(this,(function(c){switch(c.label){case 0:return[4,h.default.mnemonicToSeed(e)];case 1:return n=c.sent(),o=g.fromSeed(n),i="".concat("m/44","/").concat("31337","'/0'/").concat(r,"'/").concat(t,"'"),a=o.derivePath(i),[2,d.ECPair.fromWIF(a.toWIF())]}}))}))},generateKeyPairFromWIF:function(e){return d.ECPair.fromWIF(e)},generateKeyPairFromSeedPhraseAndAddress:function(e,t){var r=b.AddressApi.encodeAddress(b.AddressApi.parseTextAddress(t)),n=r.block,o=r.group;return this.generateKeyPairFromSeedPhrase(e,n,o)},encryptWalletDataToPEM:function(e,t,r){var n=u.default.decode(e);return E(n.privateKey,r)+"\n"+function(e,t,r){void 0===r&&(r=y);var n=b.AddressApi.parseTextAddress(e),o=v.Buffer.concat([v.Buffer.from([48,20,12,8,80,87,82,95,65,68,68,82,4,8]),v.Buffer.from(n)]),i=p.default.randomBytes(16),a=A(t,i.slice(0,8));return function(e,t,r){return void 0===r&&(r=y),"-----BEGIN EXTRA DATA-----\nProc-Type: 4,ENCRYPTED\nDEK-Info: ".concat(r.toUpperCase(),",").concat(t.toString("hex").toUpperCase(),"    \n\n").concat(_(e.toString("base64")),"\n-----END EXTRA DATA-----")}(T(o,a,i,r),i,r)}(t,r)},decryptWalletData:function(e,t){var r,n=null===(r=e.match(/(^-----BEGIN[\s\S]+?^-----END.+$){1}?/gm))||void 0===r?void 0:r.map(C);if(2!==(null==n?void 0:n.length))throw new Error("File is corrupt!");var o=n.find((function(e){return void 0===e.type})),i=n.find((function(e){return void 0!==e.type})),a=function(e,t,r,n){var o;void 0===n&&(n=y);var i=v.Buffer.from(e,"base64"),a=A(t,m(r).slice(0,8)),c=S(i,a,r,n);return null===(o=b.AddressApi.encodeAddress(c.slice(-8)))||void 0===o?void 0:o.txt}(null==o?void 0:o.data,t,null==o?void 0:o.ivsalt),c=x(null==i?void 0:i.data,t,null==i?void 0:i.ivsalt);return{address:a,wif:u.default.encode(128,m(c),!0)}},encryptWif:function(e,t){var r=u.default.decode(e);return E(r.privateKey,t)},decryptWif:function(e,t){var r=C(e),n=x(r.data,t,r.ivsalt);return u.default.encode(128,m(n),!0)}}},86:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(735),t),o(r(49),t),o(r(115),t),o(r(801),t),o(r(970),t),o(r(408),t),o(r(762),t)},115:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Network=void 0;var c=a(r(167)),s=a(r(999)),u=r(778),f=r(354),l=r(14),h=(0,a(r(974)).default)("info"),d=function(){function e(e){var t=this;this.currentChain="",this.currentNodes=[],this.nodeIndex=0,this.setCurrentConfig=function(e){return n(t,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=this,[4,(0,f.queueNodes)(e)];case 1:return t.currentNodes=r.sent(),this.nodeIndex=0,[2]}}))}))},this.getBlock=function(e){return void 0===e&&(e="last"),n(t,void 0,void 0,(function(){return o(this,(function(t){return[2,this.askBlockchainTo(l.ChainAction.GET_BLOCK,{chain:this.currentChain,hash:e})]}))}))},this.getWallet=function(e){return n(t,void 0,void 0,(function(){return o(this,(function(t){return[2,this.askBlockchainTo(l.ChainAction.GET_WALLET,{chain:this.currentChain,address:e})]}))}))},this.loadScCode=function(e){return n(t,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=Uint8Array.bind,[4,this.askBlockchainTo(l.ChainAction.GET_SC_CODE,{chain:this.currentChain,address:e})];case 1:return[2,new(t.apply(Uint8Array,[void 0,r.sent()]))]}}))}))},this.loadScState=function(e){return n(t,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return t=Uint8Array.bind,[4,this.askBlockchainTo(l.ChainAction.GET_SC_STATE,{chain:this.currentChain,address:e})];case 1:return[2,new(t.apply(Uint8Array,[void 0,r.sent()]))]}}))}))},this.bootstrap=function(){return n(t,void 0,void 0,(function(){var e,t;return o(this,(function(r){switch(r.label){case 0:return[4,this.getChainInfo()];case 1:if(!(e=r.sent())[this.currentChain])return[3,3];if(!(t=e[this.currentChain]).length)throw new Error("No nodes found for chain ".concat(this.currentChain));return[4,this.setCurrentConfig(t)];case 2:return r.sent(),h("Bootstrapped chain ".concat(this.currentChain),this.currentNodes),[2];case 3:throw new Error("Unknown chain ".concat(this.currentChain))}}))}))},this.checkTransaction=function(e,r,i,a){return void 0===a&&(a=0),n(t,void 0,void 0,(function(){var t,n,c=this;return o(this,(function(o){switch(o.label){case 0:n=a,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.askBlockchainTo(l.ChainAction.GET_TRANSACTION_STATUS,{txId:e})];case 2:return t=o.sent(),[3,4];case 3:return o.sent(),r(!1,"Network error"),[3,4];case 4:return t?r(!t.error,"".concat(e,": ").concat(t.res)):a<i?setTimeout((function(){return c.checkTransaction(e,r,i,++n)}),u.config.callbackCallDelay):r(!1,"".concat(e,": Transaction status lost")),[2]}}))}))},this.incrementNodeIndex=function(){return n(t,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return this.nodeIndex++,this.nodeIndex>=this.currentNodes.length||this.currentNodes[this.nodeIndex].time===u.config.maxNodeResponseTime?(e=this,[4,(0,f.queueNodes)(this.currentNodes)]):[3,2];case 1:if(e.currentNodes=t.sent(),this.nodeIndex=0,this.nodeIndex>=this.currentNodes.length||this.currentNodes[this.nodeIndex].time===u.config.maxNodeResponseTime)throw new Error("Chain unavailable.");t.label=2;case 2:return[2]}}))}))},this.httpRequest=function(e,r){return n(t,void 0,void 0,(function(){var t,n,i,a,s;return o(this,(function(o){switch(o.label){case 0:if(t=u.config.requestTotalAttempts,n=!1,a=0,!this.currentNodes.length)throw new Error("No nodes to query, probably need to call bootstrap()");o.label=1;case 1:if(n)return[3,11];a++,r.baseURL="".concat(this.currentNodes[this.nodeIndex].address,"/api").concat(e),o.label=2;case 2:return o.trys.push([2,4,,10]),[4,c.default.request(r)];case 3:return i=o.sent(),n=!0,[3,10];case 4:return void 0!==(s=o.sent()).response?[3,8]:a<t?[4,this.incrementNodeIndex()]:[3,6];case 5:return o.sent(),[3,7];case 6:throw new Error("Too many attempts.");case 7:return[3,9];case 8:throw new Error(s.response.data.msg);case 9:return[3,10];case 10:return[3,1];case 11:return[2,i.data]}}))}))},this.currentChain=e.toString()}return e.prototype.sendTxAndWaitForResponse=function(e,t){return void 0===t&&(t=120),n(this,void 0,void 0,(function(){var r=this;return o(this,(function(n){return[2,new Promise((function(n,o){r.sendPreparedTX(e,(function(e,t){return e?n(t):o(t)}),t)}))]}))}))},e.prototype.getFeeSettings=function(){return n(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return[4,this.askBlockchainTo(l.ChainAction.GET_NODE_SETTINGS,{})];case 1:return e=t.sent(),[2,this.calculateFeeSettings(e)]}}))}))},e.prototype.getChain=function(){return this.currentChain},e.prototype.getChainInfo=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){return[2,Promise.resolve(u.chainConfig)]}))}))},e.prototype.loadRemoteSCInterface=function(e){return n(this,void 0,void 0,(function(){var t,r,n,a,u,f,l,h,d;return o(this,(function(o){switch(o.label){case 0:return t=i(e,2),r=t[0],n=t[1],a=i(r.split(":"),2),u=a[0],f=a[1],l=n.includes("ipfs")?"https://ipfs.io/ipfs/".concat(n.split("://")[1]):n+"?".concat(+new Date),[4,c.default.request({baseURL:l,responseType:"arraybuffer"})];case 1:if(h=o.sent().data,d=new Uint8Array(h),(0,s.default)(u).update(d).digest().toString("hex")!==f)throw new Error("Hash mismatch");return[2,d]}}))}))},e.prototype.sendPreparedTX=function(e,t,r){return n(this,void 0,void 0,(function(){var n,i=this;return o(this,(function(o){switch(o.label){case 0:return[4,this.askBlockchainTo(l.ChainAction.CREATE_TRANSACTION,{data:{tx:e}})];case 1:return n=o.sent(),t&&setTimeout((function(){return i.checkTransaction(n.txid,t,r)}),u.config.callbackCallDelay),[2,n]}}))}))},e.prototype.calculateFeeSettings=function(e){var t,r=e.current;if(!r.fee)return{};if((r=r.fee).SK)t="SK";else{if(!r.FEE)return{};t="FEE"}return{feeCur:t,fee:r[t].base,baseEx:r[t].baseextra,kb:r[t].kb}},e.prototype.checkResponseValidity=function(e){if(!(e instanceof ArrayBuffer||e instanceof Buffer||e.ok))throw e.msg?new Error("(".concat(e.code,") ").concat(e.msg)):new Error("Incorrect response (".concat(e.code,")"))},e.prototype.getAddressChain=function(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.askBlockchainTo(l.ChainAction.GET_MY_CHAIN,{address:e})];case 1:return[2,t.sent().chain]}}))}))},e.prototype.askBlockchainTo=function(e,t){return n(this,void 0,void 0,(function(){var r,n,i;return o(this,(function(o){switch(o.label){case 0:switch(n={timeout:u.config.chainRequestTimeout,method:"get"},e){case l.ChainAction.GET_BLOCK:r="/block",n.url=t.hash;break;case l.ChainAction.GET_WALLET:r="/address",n.url=t.address;break;case l.ChainAction.CREATE_TRANSACTION:r="/tx/new",n.method="post",n.data=t.data;break;case l.ChainAction.GET_TRANSACTION_STATUS:r="/tx/status",n.url=t.txId;break;case l.ChainAction.GET_MY_CHAIN:r="/where",n.url=t.address;break;case l.ChainAction.GET_CHAIN_NODES:r="/nodes",n.url=t.remoteChain.toString();break;case l.ChainAction.GET_NODE_SETTINGS:r="/settings";break;case l.ChainAction.GET_SC_CODE:n.responseType="arraybuffer",n.url=t.address+"/code",r="/address";break;case l.ChainAction.GET_SC_STATE:n.responseType="arraybuffer",n.url=t.address+"/state",r="/address";break;default:throw new Error("Unknown action")}return[4,this.httpRequest(r,n)];case 1:return i=o.sent(),this.checkResponseValidity(i),[2,i=(0,f.transformResponse)(i,e)]}}))}))},e}();t.Network=d},801:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentsLib=void 0;var i=r(167),a="http://wallet.thepower.io/api/paygw/address",c=function(){return"http://wallet.thepower.io/api/paygw/currency"};t.PaymentsLib={getForeignWallets:function(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,i.get("".concat(a,"/").concat(e))];case 1:return[2,t.sent().data.assigned]}}))}))},createForeignWallet:function(e,t){return n(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,i.get("".concat(a,"/").concat(e,"/").concat(t))];case 1:return[2,r.sent().data.assigned]}}))}))},getForeignTransactions:function(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,i.get("".concat("http://wallet.thepower.io/api/paygw/txs","/").concat(e))];case 1:return[2,t.sent().data.txs.sort((function(e,t){return+new Date(e.first_seen)-+new Date(t.first_seen)}))]}}))}))},logPaymentsData:function(e,t,r){return n(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,i.post("https://thepower.io/invite.php",{address:t,invite:e,email:r})];case 1:return n.sent(),[2]}}))}))},getForeignTokens:function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,i.get(c)];case 1:return[2,e.sent().data.res]}}))}))}}},970:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SmartContractWrapper=void 0;var l=i(r(498)),h=i(r(404)),d=f(r(999)),p=i(r(765)),v=r(133);t.SmartContractWrapper=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r={});var n=this;if(this.binToStr=function(e){return e.reduce((function(e,t){return e+String.fromCharCode(t)}),"")},this.executeMethod=function(e,t){return void 0===t&&(t=[]),a(n,void 0,void 0,(function(){var r,n,o,i=this;return c(this,(function(f){switch(f.label){case 0:return n=[],[4,WebAssembly.instantiate(this.contract,{env:{storage_reset:function(){throw new Error("storage_reset method is called via interface")},storage_read:function(e,t,r,n){var a=o.instance.exports.memory.buffer,c=i.binToStr(new Uint8Array(a,t,e)),s=i.state[c],u=new Uint8Array(a,n,r);s.forEach((function(e,t){return u[t]=e}))},storage_write:function(e,t,r,n){var a=o.instance.exports.memory.buffer,c=i.binToStr(new Uint8Array(a,t,e));i.state[c]=new Uint8Array(a.slice(n,n+r))},storage_value_size:function(e,t){var r=o.instance.exports.memory.buffer,n=i.binToStr(new Uint8Array(r,t,e)),a=i.state[n];return a?a.length:0},debug:function(e,t){var r=new Uint8Array(o.instance.exports.memory.buffer,t,e);i.binToStr(r)},flush:function(){},get_tx_raw_size:function(){return 0},get_tx_raw:function(){return 0},get_args_raw_size:function(){return l.encode(t).length},get_args_raw:function(e){var r=l.encode(t),n=new Uint8Array(o.instance.exports.memory.buffer,e,r.length);r.forEach((function(e,t){return n[t]=e}))},get_balance_raw_size:function(){return l.encode(i.balance).length},get_balance_raw:function(e){var t=l.encode(i.balance),r=new Uint8Array(o.instance.exports.memory.buffer,e,t.length);t.forEach((function(e,t){return r[t]=e}))},set_return:function(e,t){var n=new Uint8Array(o.instance.exports.memory.buffer.slice(t,t+e));r=l.decode(n)},emit_tx:function(e,t){var r=new Uint8Array(o.instance.exports.memory.buffer.slice(t,t+e));n=u(u([],s(n),!1),[l.decode(r)],!1)},get_file_hash:function(e,t,r,n){return a(i,void 0,void 0,(function(){var i,a,s,u;return c(this,(function(c){return i=o.instance.exports.memory.buffer,a=this.binToStr(new Uint8Array(i,t,e)),s=this.hashes.get(a),u=new Uint8Array(i,n,r),s.forEach((function(e,t){return u[t]=e})),[2]}))}))},time:function(){return+new Date/1e3}}})];case 1:return(o=f.sent()).instance.exports[e](),n.length&&(r=r?u(u([],s(r),!1),[u(["tx"],s(n),!1)],!1):[u(["tx"],s(n),!1)]),[2,r]}}))}))},this.escapeAll=function(e){return e.replace(/\n/g,"\\n")},this.drawInterface=function(e,t,r,o){return void 0===o&&(o=[]),a(n,void 0,void 0,(function(){var n,i,s,u,f,l,h=this;return c(this,(function(p){switch(p.label){case 0:if(!e)throw new Error("Container is mandatory");if(!t)throw new Error("Transactions callback is mandatory");for(;e.firstChild;)e.removeChild(e.firstChild);return[4,this.executeMethod("".concat(r,"_wrapper"),o)];case 1:if(n=p.sent(),i=null==n?void 0:n.find((function(e){return"form"===e[0]})),(s=null==n?void 0:n.filter((function(e){return"tx"===e[0]})))&&s.forEach((function(e){return t(e[1])})),i){u=i[1].default_values?JSON.parse(this.escapeAll(i[1].default_values)):void 0;try{f=this.forms.create(JSON.parse(this.escapeAll(i[1].form.trim())))}catch(e){f=this.forms.create(JSON.parse(i[1].form.trim()))}f.render(e,u),e.querySelectorAll("input[type=file]").forEach((function(e){return e.addEventListener("change",(function(e){return a(h,void 0,void 0,(function(){var t,r,n,o,i;return c(this,(function(a){switch(a.label){case 0:return t=null===(i=null===(o=e.target)||void 0===o?void 0:o.files)||void 0===i?void 0:i[0],[4,(0,v.getFileData)(t,v.FileReaderType.binary)];case 1:return r=a.sent(),n=(0,d.default)("sha512").update(new Uint8Array(r)).digest(),this.hashes.set(t.name,n),[2]}}))}))}))})),(l=i[1].actions)&&l.forEach((function(r){var n=document.createElement("div"),o=document.createElement("button");o.innerText=r.caption,r.noValidate?o.onclick=function(){h.drawInterface(e,t,r.action)}:o.onclick=function(){if(f.validate()){var n=f.getData();n=void 0!==n?[n]:[],h.drawInterface(e,t,r.action,n)}},n.appendChild(o),e.appendChild(n)}))}return[2]}}))}))},this.getName=function(){return a(n,void 0,void 0,(function(){return c(this,(function(e){return[2,this.executeMethod("get_name_wrapper")]}))}))},this.getDescription=function(){return a(n,void 0,void 0,(function(){return c(this,(function(e){return[2,this.executeMethod("get_description_wrapper")]}))}))},this.getIcon=function(){return a(n,void 0,void 0,(function(){var e,t;return c(this,(function(r){switch(r.label){case 0:return[4,this.executeMethod("get_icon_wrapper")];case 1:if((e=r.sent()).subarray(0,3).toString()===[31,139].toString())t="svg";else if(e.subarray(0,3).toString()===[255,216,255].toString())t="jpeg";else if(e.subarray(0,4).toString()===[71,73,70,56].toString())t="gif";else if(e.subarray(0,5).toString()===[60,63,120,109,108].toString())t="svg+xml";else{if(e.subarray(0,8).toString()!==[137,80,78,71,13,10,26,10].toString())throw new Error("Unknown icon format");t="png"}return[2,"data:image/".concat(t,";base64, ").concat(e.toString())]}}))}))},!e)throw new Error("SC body is mandatory");this.hashes=new Map;var o=e.subarray(0,4).toString()===[4,34,77,24].toString();this.contract=o?h.decompress(e):e,this.state=l.decode(t),this.balance=r,this.forms=p}},408:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadScLocal=t.instantiateSC=void 0;var s=r(970),u=i(r(498)),f=r(86);t.instantiateSC=function(e,t){return void 0===t&&(t=8),a(void 0,void 0,void 0,(function(){var r,n,o,i,a,u;return c(this,(function(c){switch(c.label){case 0:return r={},[4,(n=new f.Network(t)).bootstrap()];case 1:return c.sent(),o=r,i=e,(a=r[e])?[3,3]:[4,n.loadScCode(e)];case 2:a=c.sent(),c.label=3;case 3:return o[i]=a,[4,n.loadScState(e)];case 4:return u=c.sent(),[2,new s.SmartContractWrapper(r[e],u)]}}))}))},t.loadScLocal=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r={}),new s.SmartContractWrapper(e,u.encode(t),r)}},762:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},c=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function c(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},u=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},f=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionsAPI=void 0;var h=l(r(999)),d=r(400),p=a(r(498)),v=r(543),w=r(735),b=URL.createObjectURL(new Blob(["(",function(){onmessage=function(e){function t(e,t){var r=e.findIndex((function(e){return 0!==e}));return(-1!==r?8*r+(8-e[r].toString(2).length):8*e.length)>=t}function r(e){if(e>=0&&e<=127)return[e];if(e<=255)return[204,e];if(e<=65535)return[205,e>>8&255,255&e];if(e<=4294967295)return[206,e>>>24&255,e>>>16&255,e>>>8&255,255&e];throw new Error("Nonce generation error")}self.importScripts("https://store.thepower.io/sha512.min.js");var n,o,i,a,c=0,s=e.data[0],u=e.data[1],f=e.data[2],l=s.slice(0,u),h=s.slice(u+1);do{var d=(n=l,o=r(++c),i=h,a=void 0,(a=new n.constructor(n.length+o.length+i.length)).set(n),a.set(o,n.length),a.set(i,n.length+o.length),a);console.log(d)}while(!t("",f));postMessage(c)}}.toString(),")()"],{type:"application/javascript"})),y=new Worker(b);URL.revokeObjectURL(b);var g=function(e,t,r){if(r>30)throw new Error("PoW difficulty is too high");return new Promise((function(n,o){y.onmessage=function(e){n(e.data)},y.onerror=function(e){o(e)},y.postMessage([e,t,r])}))},_=function(e,t,r,o,i){return void 0===i&&(i=16),c(void 0,void 0,void 0,(function(){var e,a,c,u,f,l,d;return s(this,(function(s){switch(s.label){case 0:e="power_wallet_".concat(process.env.GIT_HEAD_HASH),a={k:17,t:r,nonce:"",h:(0,h.default)("sha256").update(t).digest(),e:{clid:e}},o&&(a=n(n({},a),{e:n(n({},a.e),{referrer:o})})),c=p.encode(a),u=new Uint8Array(c),f=c.indexOf("A56E6F6E636500",0,"hex")+6,s.label=1;case 1:return s.trys.push([1,3,,4]),l=a,[4,g(u,f,i)];case 2:return l.nonce=s.sent(),[3,4];case 3:throw d=s.sent(),new Error(d.message);case 4:return[2,a]}}))}))},m=function(e,t){if(t.feeCur&&t.fee&&t.baseEx&&t.kb){e.p.push([1,t.feeCur,t.fee]);var r=void 0;do{(r=p.encode(e).length)>t.baseEx&&(e.p.find((function(e){return 1===e[0]}))[2]=t.fee+Math.floor((r-t.baseEx)*t.kb/1024))}while(r!==p.encode(e).length)}return e},A=function(e,t,r,n,o,i,a,c){return m({k:16,t:i,f:e,to:t,s:a,p:r&&n?[[0,r,n]]:[],e:o?{msg:o}:{}},c)},T=function(e,t,r){var n=new Uint8Array(r.length+2);n.set([2]),n.set([r.length],1),n.set(r,2);var o=new Uint8Array(n.length+e.length);o.set(n),o.set(e,n.length);var i=t.sign((0,h.default)("sha256").update(o).digest()).toDER(),a=new Uint8Array(i.length+2);a.set([255]),a.set([i.length],1),a.set(i,2);var c=new Uint8Array(a.length+n.length);return c.set(a),c.set(n,a.length),{body:e,sig:[d.Buffer.from(c)],ver:2}};t.TransactionsAPI={isSingleSignatureValid:function(e,t){var r=this.extractTaggedDataFromBSig(2,t),n=this.extractTaggedDataFromBSig(255,t),o=v.ECSignature.fromDER(n),i=v.ECPair.fromPublicKeyBuffer(d.Buffer.from(r)),a=t.subarray(n.length+2),c=new Uint8Array(a.length+e.length);c.set(a),c.set(e,a.length);var s=(0,h.default)("sha256").update(c).digest();return i.verify(s,o)},composeSimpleTransferTX:function(e,t,r,n,o,i,a,c){var s=v.ECPair.fromWIF(t),u=s.getPublicKeyBuffer(),f=+new Date,l=d.Buffer.from(w.AddressApi.parseTextAddress(r)),h=d.Buffer.from(w.AddressApi.parseTextAddress(n)),b=p.encode(A(l,h,o,i,a,f,c,e));return p.encode(T(b,s,u)).toString("base64")},composeRegisterTX:function(e,t,r){return c(this,void 0,void 0,(function(){var e,n,o,i,a,c;return s(this,(function(s){switch(s.label){case 0:return e=v.ECPair.fromWIF(t),n=e.getPublicKeyBuffer(),o=+new Date,c=(a=p).encode,[4,_(0,n,o,r)];case 1:return i=c.apply(a,[s.sent()]),[2,p.encode(T(i,e,n)).toString("base64")]}}))}))},calculateFee:function(e,t,r,n,o,i,a){var c=+new Date,s=d.Buffer.from(w.AddressApi.parseTextAddress(t)),u=d.Buffer.from(w.AddressApi.parseTextAddress(r));return A(s,u,n,o,i,c,a,e).p.find((function(e){return 1===e[0]}))},packAndSignTX:function(e,t){var r=v.ECPair.fromWIF(t),n=r.getPublicKeyBuffer(),o=p.encode(e);return p.encode(T(o,r,n)).toString("base64")},prepareTXFromSC:function(e,t,r,n,o,i,a){void 0===i&&(i="SK"),void 0===a&&(a=2e4);var c=+new Date,s=d.Buffer.from(w.AddressApi.parseTextAddress(t)),l=19!==o.k?{t:c,s:n,p:o.p?f(f([],u(o.p),!1),[[3,i,a]],!1):[[3,i,a]],f:s}:{};return m({scData:o,actual:l},e)},composeDeployTX:function(e,r,n,o,i,a,c){var s=[d.Buffer.from(w.AddressApi.parseTextAddress(e))],u={k:18,t:+new Date,f:d.Buffer.from(w.AddressApi.parseTextAddress(e)),to:d.Buffer.from(w.AddressApi.parseTextAddress(e)),s:+new Date,p:[[3,o,i]],c:["init",s],e:{code:d.Buffer.from(new Uint8Array(r)),vm:"wasm",view:[]}};return t.TransactionsAPI.packAndSignTX(m(u,c),a)},decodeTx:function(e){var t=e;return d.Buffer.isBuffer(t)||(t=new d.Buffer(t,"base64")),t=p.decode(t),e.body=p.decode(e.body),e},listValidTxSignatures:function(e){var t=this,r=e;d.Buffer.isBuffer(r)||(r=new d.Buffer(r,"base64"));var n=(r=p.decode(r)).body,o=r.sig,i=o.filter((function(e){return t.isSingleSignatureValid(n,e)}));return{validSignatures:i,invalidSignaturesCount:o.length-i.length}},extractTaggedDataFromBSig:function(e,t){for(var r=0;t[r]!==e&&r<t.length;)r=r+t[r+1]+2;return t.subarray(r+2,r+2+t[r+1])},composeSCMethodCallTX:function(e,t,r,n,o,i,a){var c={k:16,t:+new Date,f:d.Buffer.from(w.AddressApi.parseTextAddress(e)),to:d.Buffer.from(w.AddressApi.parseTextAddress(t)),s:+new Date,p:[],c:r};return this.packAndSignTX(m(c,a),i)},composeStoreTX:function(e,t,r,n){var o={k:22,t:+new Date,f:d.Buffer.from(w.AddressApi.parseTextAddress(e)),s:+new Date,p:[],pa:p.encode(t.map((function(e){return p.encode(e)})))};return this.packAndSignTX(m(o,n),r)}}},563:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AddressScopeEnum=void 0,(r=t.AddressScopeEnum||(t.AddressScopeEnum={})).public="public",r.private="private"},133:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.getFileData=t.FileReaderType=void 0,function(e){e[e.binary=0]="binary",e[e.arrayBuffer=1]="arrayBuffer"}(r=t.FileReaderType||(t.FileReaderType={})),t.getFileData=function(e,t){var n=new FileReader;return new Promise((function(o,i){n.onerror=function(){n.abort(),i("Parsing error")},n.onload=function(){o(n.result)},t===r.binary?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}))}},498:e=>{e.exports=require("@thepowereco/msgpack")},167:e=>{e.exports=require("axios")},731:e=>{e.exports=require("bip32")},176:e=>{e.exports=require("bip39")},543:e=>{e.exports=require("bitcoinjs-lib")},765:e=>{e.exports=require("brutusin-json-forms")},999:e=>{e.exports=require("create-hash")},974:e=>{e.exports=require("debug")},404:e=>{e.exports=require("lz4js")},400:e=>{e.exports=require("safe-buffer")},163:e=>{e.exports=require("tiny-secp256k1")},497:e=>{e.exports=require("wif")},113:e=>{e.exports=require("crypto")}},t={};!function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}(607)})();